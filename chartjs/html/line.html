<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>line</title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <div class="theme-default-content content__default">
      <h1 id="interpolation-modes"><a href="#interpolation-modes" class="header-anchor">#</a> Interpolation Modes</h1>
      <div>
        <div class="chart-view">
          <canvas id="interpolationChart"></canvas>
        </div>
      </div>

      <h1 id="line-chart"><a href="#line-chart" class="header-anchor">#</a> Line Chart</h1>
      <div>
        <div class="chart-view">
          <canvas id="lineChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.line.randomize(chartAry[1]);">Randomize</a>
          <a href="#" class="chart-action" onclick="actions.line.addDataset(chartAry[1]);">add Dataset</a>
          <a href="#" class="chart-action" onclick="actions.line.addData(chartAry[1]);">add Data</a>
          <a href="#" class="chart-action" onclick="actions.line.removeDataset(chartAry[1]);">remove Dataset</a>
          <a href="#" class="chart-action" onclick="actions.line.removeData(chartAry[1]);">remove Data</a>
        </div>
      </div>

      <h1 id="multi-axis-line-chart"><a href="#multi-axis-line-chart" class="header-anchor">#</a> Multi Axis Line Chart</h1>
      <div>
        <div class="chart-view">
          <canvas id="multiAxisChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.multiAxis.randomize(chartAry[2]);">Randomize</a>
        </div>
      </div>

      <h1 id="point-styling"><a href="#point-styling" class="header-anchor">#</a> Point Styling</h1>
      <div>
        <div class="chart-view">
          <canvas id="pointStylingChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.pointStyling.circle(chartAry[3]);">pointStyle: circle (default)</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.cross(chartAry[3]);">pointStyle: cross</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.crossRot(chartAry[3]);">pointStyle: crossRot</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.dash(chartAry[3]);">pointStyle: dash</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.line(chartAry[3]);">pointStyle: line</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.rect(chartAry[3]);">pointStyle: rect</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.rectRounded(chartAry[3]);">pointStyle: rectRounded</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.rectRot(chartAry[3]);">pointStyle: rectRot</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.star(chartAry[3]);">pointStyle: star</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.triangle(chartAry[3]);">pointStyle: triangle</a>
          <a href="#" class="chart-action" onclick="actions.pointStyling.false(chartAry[3]);">pointStyle: false</a>
        </div>
      </div>

      <h1 id="line-segment-styling"><a href="#line-segment-styling" class="header-anchor">#</a> Line Segment Styling</h1>
      <div>
        <div class="chart-view">
          <canvas id="lineSegmentChart"></canvas>
        </div>
      </div>

      <h1 id="stepped-line-charts"><a href="#stepped-line-charts" class="header-anchor">#</a> Stepped Line Charts</h1>
      <div>
        <div class="chart-view">
          <canvas id="steppedLineChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.steppedLine.false(chartAry[5]);">Step: false (default)</a>
          <a href="#" class="chart-action" onclick="actions.steppedLine.true(chartAry[5]);">Step: true</a>
          <a href="#" class="chart-action" onclick="actions.steppedLine.before(chartAry[5]);">Step: before</a>
          <a href="#" class="chart-action" onclick="actions.steppedLine.after(chartAry[5]);">Step: after</a>
          <a href="#" class="chart-action" onclick="actions.steppedLine.middle(chartAry[5]);">Step: middle</a>
        </div>
      </div>

      <h1 id="line-styling"><a href="#line-styling" class="header-anchor">#</a> Line Styling</h1>
      <div>
        <div class="chart-view">
          <canvas id="lineStylingChart"></canvas>
        </div>
      </div>
    </div>

    <script src="../js/include.js"></script>
    <script src="../js/chart_v4.3.1.min.js"></script>
    <script src="../js/luxon_v3.3.0.min.js"></script>
    <script src="../js/chartjs-adapter-luxon_v1.3.1.min.js"></script>
    <script src="../js/color_v0.3.2.js"></script>
    <script src="../js/chart_utils.js"></script>

    <script>
      const chartAry = [];

      function interpolationChartInit() {
        //data
        const DATA_COUNT = 12;
        const labels = [];
        for (let i = 0; i < DATA_COUNT; ++i) {
          labels.push(i.toString());
        }
        const datapoints = [0, 20, 20, 60, 60, 120, NaN, 180, 120, 125, 105, 110, 170];
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Cubic interpolation (monotone)',
              data: datapoints,
              borderColor: Utils.CHART_COLORS.red,
              fill: false,
              cubicInterpolationMode: 'monotone',
              tension: 0.4
            },
            {
              label: 'Cubic interpolation',
              data: datapoints,
              borderColor: Utils.CHART_COLORS.blue,
              fill: false,
              tension: 0.4
            },
            {
              label: 'Linear interpolation (default)',
              data: datapoints,
              borderColor: Utils.CHART_COLORS.green,
              fill: false
            }
          ]
        };

        //config
        const config = {
          type: 'line',
          data: data,
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: 'Chart.js Line Chart - Cubic interpolation mode'
              }
            },
            interaction: {
              intersect: false
            },
            scales: {
              x: {
                display: true,
                title: {
                  display: true
                }
              },
              y: {
                display: true,
                title: {
                  display: true,
                  text: 'Value'
                },
                suggestedMin: -10,
                suggestedMax: 200
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('interpolationChart');
        const interpolationChart = new Chart(ctx, config);
        chartAry.push(interpolationChart);
      }
      interpolationChartInit();

      function lineChartInit() {
        //data
        const DATA_COUNT = 7;
        const NUMBER_CFG = { count: DATA_COUNT, min: -100, max: 100 };

        const labels = Utils.months({ count: 7 });
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Dataset 1',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.red,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5)
            },
            {
              label: 'Dataset 2',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.blue,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.blue, 0.5)
            }
          ]
        };

        //config
        const config = {
          type: 'line',
          data: data,
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: 'top'
              },
              title: {
                display: true,
                text: 'Chart.js Line Chart'
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('lineChart');
        const lineChart = new Chart(ctx, config);
        chartAry.push(lineChart);
      }
      lineChartInit();

      function multiAxisChartInit() {
        //data
        const DATA_COUNT = 7;
        const NUMBER_CFG = { count: DATA_COUNT, min: -100, max: 100 };

        const labels = Utils.months({ count: 7 });
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Dataset 1',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.red,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5),
              yAxisID: 'y'
            },
            {
              label: 'Dataset 2',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.blue,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.blue, 0.5),
              yAxisID: 'y1'
            }
          ]
        };

        //config
        const config = {
          type: 'line',
          data: data,
          options: {
            responsive: true,
            interaction: {
              mode: 'index',
              intersect: false
            },
            stacked: false,
            plugins: {
              title: {
                display: true,
                text: 'Chart.js Line Chart - Multi Axis'
              }
            },
            scales: {
              y: {
                type: 'linear',
                display: true,
                position: 'left'
              },
              y1: {
                type: 'linear',
                display: true,
                position: 'right',

                // grid line settings
                grid: {
                  drawOnChartArea: false // only want the grid lines for one axis to show up
                }
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('multiAxisChart');
        const multiAxisChart = new Chart(ctx, config);
        chartAry.push(multiAxisChart);
      }
      multiAxisChartInit();

      function pointStylingChartInit() {
        //data
        const data = {
          labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6'],
          datasets: [
            {
              label: 'Dataset',
              data: Utils.numbers({ count: 6, min: -100, max: 100 }),
              borderColor: Utils.CHART_COLORS.red,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5),
              pointStyle: 'circle',
              pointRadius: 10,
              pointHoverRadius: 15
            }
          ]
        };

        //config
        const config = {
          type: 'line',
          data: data,
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: (ctx) => 'Point Style: ' + ctx.chart.data.datasets[0].pointStyle
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('pointStylingChart');
        const pointStylingChart = new Chart(ctx, config);
        chartAry.push(pointStylingChart);
      }
      pointStylingChartInit();

      function lineSegmentChartInit() {
        const skipped = (ctx, value) => (ctx.p0.skip || ctx.p1.skip ? value : undefined);
        const down = (ctx, value) => (ctx.p0.parsed.y > ctx.p1.parsed.y ? value : undefined);
        const genericOptions = {
          fill: false,
          interaction: {
            intersect: false
          },
          radius: 0
        };

        //config
        const config = {
          type: 'line',
          data: {
            labels: Utils.months({ count: 7 }),
            datasets: [
              {
                label: 'My First Dataset',
                data: [65, 59, NaN, 48, 56, 57, 40],
                borderColor: 'rgb(75, 192, 192)',
                segment: {
                  borderColor: (ctx) => skipped(ctx, 'rgb(0,0,0,0.2)') || down(ctx, 'rgb(192,75,75)'),
                  borderDash: (ctx) => skipped(ctx, [6, 6])
                },
                spanGaps: true
              }
            ]
          },
          options: genericOptions
        };

        //init
        const ctx = document.getElementById('lineSegmentChart');
        const lineSegmentChart = new Chart(ctx, config);
        chartAry.push(lineSegmentChart);
      }
      lineSegmentChartInit();

      function steppedLineChartInit() {
        //data
        const data = {
          labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6'],
          datasets: [
            {
              label: 'Dataset',
              data: Utils.numbers({ count: 6, min: -100, max: 100 }),
              borderColor: Utils.CHART_COLORS.red,
              fill: false,
              stepped: true
            }
          ]
        };

        //config
        const config = {
          type: 'line',
          data: data,
          options: {
            responsive: true,
            interaction: {
              intersect: false,
              axis: 'x'
            },
            plugins: {
              title: {
                display: true,
                text: (ctx) => 'Step ' + ctx.chart.data.datasets[0].stepped + ' Interpolation'
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('steppedLineChart');
        const steppedLineChart = new Chart(ctx, config);
        chartAry.push(steppedLineChart);
      }
      steppedLineChartInit();

      function lineStylingChartInit() {
        //data
        const DATA_COUNT = 7;
        const NUMBER_CFG = { count: DATA_COUNT, min: -100, max: 100 };

        const labels = Utils.months({ count: DATA_COUNT });
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Unfilled',
              fill: false,
              backgroundColor: Utils.CHART_COLORS.blue,
              borderColor: Utils.CHART_COLORS.blue,
              data: Utils.numbers(NUMBER_CFG)
            },
            {
              label: 'Dashed',
              fill: false,
              backgroundColor: Utils.CHART_COLORS.green,
              borderColor: Utils.CHART_COLORS.green,
              borderDash: [5, 5],
              data: Utils.numbers(NUMBER_CFG)
            },
            {
              label: 'Filled',
              backgroundColor: Utils.CHART_COLORS.red,
              borderColor: Utils.CHART_COLORS.red,
              data: Utils.numbers(NUMBER_CFG),
              fill: true
            }
          ]
        };

        //config
        const config = {
          type: 'line',
          data: data,
          options: {
            responsive: true,
            plugins: {
              title: {
                display: true,
                text: 'Chart.js Line Chart'
              }
            },
            interaction: {
              mode: 'index',
              intersect: false
            },
            scales: {
              x: {
                display: true,
                title: {
                  display: true,
                  text: 'Month'
                }
              },
              y: {
                display: true,
                title: {
                  display: true,
                  text: 'Value'
                }
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('lineStylingChart');
        const lineStylingChart = new Chart(ctx, config);
        chartAry.push(lineStylingChart);
      }
      lineStylingChartInit();

      //action
      const actions = {
        line: {
          randomize: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.data = Utils.numbers({ count: chart.data.labels.length, min: -100, max: 100 });
            });
            chart.update();
          },
          addDataset: function (chart) {
            const data = chart.data;
            const dsColor = Utils.namedColor(chart.data.datasets.length);
            const newDataset = {
              label: 'Dataset ' + (data.datasets.length + 1),
              backgroundColor: Utils.transparentize(dsColor, 0.5),
              borderColor: dsColor,
              data: Utils.numbers({ count: data.labels.length, min: -100, max: 100 })
            };
            chart.data.datasets.push(newDataset);
            chart.update();
          },
          addData: function (chart) {
            const data = chart.data;
            if (data.datasets.length > 0) {
              data.labels = Utils.months({ count: data.labels.length + 1 });

              for (let index = 0; index < data.datasets.length; ++index) {
                data.datasets[index].data.push(Utils.rand(-100, 100));
              }

              chart.update();
            }
          },
          removeDataset: function (chart) {
            chart.data.datasets.pop();
            chart.update();
          },
          removeData: function (chart) {
            chart.data.labels.splice(-1, 1); // remove the label first

            chart.data.datasets.forEach((dataset) => {
              dataset.data.pop();
            });

            chart.update();
          }
        },
        multiAxis: {
          randomize: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.data = Utils.numbers({ count: chart.data.labels.length, min: -100, max: 100 });
            });
            chart.update();
          }
        },
        pointStyling: {
          circle: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'circle';
            });
            chart.update();
          },
          cross: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'cross';
            });
            chart.update();
          },
          crossRot: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'crossRot';
            });
            chart.update();
          },
          dash: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'dash';
            });
            chart.update();
          },
          line: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'line';
            });
            chart.update();
          },
          rect: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'rect';
            });
            chart.update();
          },
          rectRounded: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'rectRounded';
            });
            chart.update();
          },
          rectRot: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'rectRot';
            });
            chart.update();
          },
          star: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'star';
            });
            chart.update();
          },
          triangle: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = 'triangle';
            });
            chart.update();
          },
          false: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.pointStyle = false;
            });
            chart.update();
          }
        },
        steppedLine: {
          false: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.stepped = false;
            });
            chart.update();
          },
          true: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.stepped = true;
            });
            chart.update();
          },
          before: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.stepped = 'before';
            });
            chart.update();
          },
          after: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.stepped = 'after';
            });
            chart.update();
          },
          middle: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.stepped = 'middle';
            });
            chart.update();
          }
        }
      };

      //resize
      if (chartAry.length) {
        window.addEventListener('resize', function () {
          // myChart.resize();
          chartAry.forEach(function (chart) {
            chart.resize();
          });
        });
      }
    </script>
  </body>
</html>
