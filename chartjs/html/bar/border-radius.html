<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>border-radius</title>
    <link rel="stylesheet" href="../../css/style.css" />
    <style>
      .chart-view {
        max-width: 100% !important;
      }
    </style>
  </head>
  <body>
    <div class="theme-default-content content__default">
      <h1 id="bar-chart-border-radius"><a href="#bar-chart-border-radius" class="header-anchor">#</a> Bar Chart Border Radius</h1>
      <div>
        <div class="chart-view">
          <canvas id="borderRadiusChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.randomize();">Randomize</a>
        </div>
      </div>

      <h1 id="floating-bars"><a href="#floating-bars" class="header-anchor">#</a> Floating Bars</h1>
    </div>

    <script src="../../js/chart_v4.3.1.min.js"></script>
    <script src="../../js/luxon_v3.3.0.min.js"></script>
    <script src="../../js/chartjs-adapter-luxon_v1.3.1.min.js"></script>
    <script src="../../js/color_v0.3.2.js"></script>
    <script src="../../js/chart_utils.js"></script>

    <script>
      const chartAry = [];

      function borderRadiusChartInit() {
        //data
        const DATA_COUNT = 7;
        const NUMBER_CFG = { count: DATA_COUNT, min: -100, max: 100 };

        const labels = Utils.months({ count: 7 });
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Fully Rounded',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.red,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5),
              borderWidth: 2,
              borderRadius: Number.MAX_VALUE,
              borderSkipped: false
            },
            {
              label: 'Small Radius',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.blue,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.blue, 0.5),
              borderWidth: 2,
              borderRadius: 5,
              borderSkipped: false
            }
          ]
        };

        //config
        const config = {
          type: 'bar',
          data: data,
          options: {
            // responsive: true,
            plugins: {
              legend: {
                position: 'top'
              },
              title: {
                display: true,
                text: 'Chart.js Bar Chart'
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('borderRadiusChart');
        const borderRadiusChart = new Chart(ctx, config);
        chartAry.push(borderRadiusChart);
      }
      borderRadiusChartInit();

      //action
      const actions = {
        randomize: function () {
          const chart = chartAry[0];
          chart.data.datasets.forEach((dataset) => {
            dataset.data = Utils.numbers({ count: chart.data.labels.length, min: -100, max: 100 });
          });
          chart.update();
        }
      };

      //resize
      if (chartAry.length) {
        window.addEventListener('resize', function () {
          // myChart.resize();
          chartAry.forEach(function (chart) {
            chart.resize();
          });
        });
      }
    </script>
  </body>
</html>
