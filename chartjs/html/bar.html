<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bar</title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <div class="theme-default-content content__default">
      <h1 id="bar-chart-border-radius"><a href="#bar-chart-border-radius" class="header-anchor">#</a> Bar Chart Border Radius</h1>
      <div>
        <div class="chart-view">
          <canvas id="borderRadiusChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.BorderRadius(chartAry[0]);">Randomize</a>
        </div>
      </div>

      <h1 id="floating-bars"><a href="#floating-bars" class="header-anchor">#</a> Floating Bars</h1>
      <div>
        <div class="chart-view">
          <canvas id="floatingBarChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.FloatingBar(chartAry[1]);">Randomize</a>
        </div>
      </div>

      <h1 id="horizontal-bar-chart"><a href="#horizontal-bar-chart" class="header-anchor">#</a> Horizontal Bar Chart</h1>
      <div>
        <div class="chart-view">
          <canvas id="HorizontalBarChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.HorizontalBar.randomize(chartAry[2]);">Randomize</a>
          <a href="#" class="chart-action" onclick="actions.HorizontalBar.addDataset(chartAry[2]);">add Dataset</a>
          <a href="#" class="chart-action" onclick="actions.HorizontalBar.addData(chartAry[2]);">add Data</a>
          <a href="#" class="chart-action" onclick="actions.HorizontalBar.removeDataset(chartAry[2]);">remove Dataset</a>
          <a href="#" class="chart-action" onclick="actions.HorizontalBar.removeData(chartAry[2]);">remove Data</a>
        </div>
      </div>

      <h1 id="stacked-bar-chart"><a href="#stacked-bar-chart" class="header-anchor">#</a> Stacked Bar Chart</h1>
      <div>
        <div class="chart-view">
          <canvas id="StackedBarChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.StackedBar(chartAry[3]);">Randomize</a>
        </div>
      </div>

      <h1 id="stacked-bar-chart-with-groups"><a href="#stacked-bar-chart-with-groups" class="header-anchor">#</a> Stacked Bar Chart with Groups</h1>
      <div>
        <div class="chart-view">
          <canvas id="StackedBarGroupsChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.StackedBarGroups(chartAry[4]);">Randomize</a>
        </div>
      </div>

      <h1 id="vertical-bar-chart"><a href="#vertical-bar-chart" class="header-anchor">#</a> Vertical Bar Chart</h1>
      <div>
        <div class="chart-view">
          <canvas id="VerticalBarChart"></canvas>
        </div>
        <div class="chart-actions">
          <a href="#" class="chart-action" onclick="actions.VerticalBar.randomize(chartAry[5]);">Randomize</a>
          <a href="#" class="chart-action" onclick="actions.VerticalBar.addDataset(chartAry[5]);">add Dataset</a>
          <a href="#" class="chart-action" onclick="actions.VerticalBar.addData(chartAry[5]);">add Data</a>
          <a href="#" class="chart-action" onclick="actions.VerticalBar.removeDataset(chartAry[5]);">remove Dataset</a>
          <a href="#" class="chart-action" onclick="actions.VerticalBar.removeData(chartAry[5]);">remove Data</a>
        </div>
      </div>
    </div>

    <script src="../js/include.js"></script>
    <script src="../js/chart_v4.3.1.min.js"></script>
    <script src="../js/luxon_v3.3.0.min.js"></script>
    <script src="../js/chartjs-adapter-luxon_v1.3.1.min.js"></script>
    <script src="../js/color_v0.3.2.js"></script>
    <script src="../js/chart_utils.js"></script>

    <script>
      const chartAry = [];
      const DATA_COUNT = 7;
      const NUMBER_CFG = { count: DATA_COUNT, min: -100, max: 100 };
      const labels = Utils.months({ count: 7 });

      function borderRadiusChartInit() {
        //data
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Fully Rounded',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.red,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5),
              borderWidth: 2,
              borderRadius: Number.MAX_VALUE,
              borderSkipped: false
            },
            {
              label: 'Small Radius',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.blue,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.blue, 0.5),
              borderWidth: 2,
              borderRadius: 5,
              borderSkipped: false
            }
          ]
        };

        //config
        const config = {
          type: 'bar',
          data: data,
          options: {
            // responsive: true,
            plugins: {
              legend: {
                position: 'top'
              },
              title: {
                display: true,
                text: 'Chart.js Bar Chart'
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('borderRadiusChart');
        const borderRadiusChart = new Chart(ctx, config);
        chartAry.push(borderRadiusChart);
      }
      borderRadiusChartInit();

      function floatingBarChartInit() {
        //data
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Dataset 1',
              data: labels.map(() => {
                return [Utils.rand(-100, 100), Utils.rand(-100, 100)];
              }),
              backgroundColor: Utils.CHART_COLORS.red
            },
            {
              label: 'Dataset 2',
              data: labels.map(() => {
                return [Utils.rand(-100, 100), Utils.rand(-100, 100)];
              }),
              backgroundColor: Utils.CHART_COLORS.blue
            }
          ]
        };

        //config
        const config = {
          type: 'bar',
          data: data,
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: 'top'
              },
              title: {
                display: true,
                text: 'Chart.js Floating Bar Chart'
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('floatingBarChart');
        const floatingBarChart = new Chart(ctx, config);
        chartAry.push(floatingBarChart);
      }
      floatingBarChartInit();

      function HorizontalBarChartInit() {
        //data
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Dataset 1',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.red,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5)
            },
            {
              label: 'Dataset 2',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.blue,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.blue, 0.5)
            }
          ]
        };

        //config
        const config = {
          type: 'bar',
          data: data,
          options: {
            indexAxis: 'y',
            // Elements options apply to all of the options unless overridden in a dataset
            // In this case, we are setting the border of each horizontal bar to be 2px wide
            elements: {
              bar: {
                borderWidth: 2
              }
            },
            responsive: true,
            plugins: {
              legend: {
                position: 'right'
              },
              title: {
                display: true,
                text: 'Chart.js Horizontal Bar Chart'
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('HorizontalBarChart');
        const HorizontalBarChart = new Chart(ctx, config);
        chartAry.push(HorizontalBarChart);
      }
      HorizontalBarChartInit();

      function StackedBarChartInit() {
        //data
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Dataset 1',
              data: Utils.numbers(NUMBER_CFG),
              backgroundColor: Utils.CHART_COLORS.red
            },
            {
              label: 'Dataset 2',
              data: Utils.numbers(NUMBER_CFG),
              backgroundColor: Utils.CHART_COLORS.blue
            },
            {
              label: 'Dataset 3',
              data: Utils.numbers(NUMBER_CFG),
              backgroundColor: Utils.CHART_COLORS.green
            }
          ]
        };

        //config
        const config = {
          type: 'bar',
          data: data,
          options: {
            plugins: {
              title: {
                display: true,
                text: 'Chart.js Bar Chart - Stacked'
              }
            },
            responsive: true,
            scales: {
              x: {
                stacked: true
              },
              y: {
                stacked: true
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('StackedBarChart');
        const StackedBarChart = new Chart(ctx, config);
        chartAry.push(StackedBarChart);
      }
      StackedBarChartInit();

      function StackedBarGroupsChartInit() {
        //data
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Dataset 1',
              data: Utils.numbers(NUMBER_CFG),
              backgroundColor: Utils.CHART_COLORS.red,
              stack: 'Stack 0'
            },
            {
              label: 'Dataset 2',
              data: Utils.numbers(NUMBER_CFG),
              backgroundColor: Utils.CHART_COLORS.blue,
              stack: 'Stack 0'
            },
            {
              label: 'Dataset 3',
              data: Utils.numbers(NUMBER_CFG),
              backgroundColor: Utils.CHART_COLORS.green,
              stack: 'Stack 1'
            }
          ]
        };

        //config
        const config = {
          type: 'bar',
          data: data,
          options: {
            plugins: {
              title: {
                display: true,
                text: 'Chart.js Bar Chart - Stacked'
              }
            },
            responsive: true,
            interaction: {
              intersect: false
            },
            scales: {
              x: {
                stacked: true
              },
              y: {
                stacked: true
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('StackedBarGroupsChart');
        const StackedBarGroupsChart = new Chart(ctx, config);
        chartAry.push(StackedBarGroupsChart);
      }
      StackedBarGroupsChartInit();

      function VerticalBarChartInit() {
        //data
        const data = {
          labels: labels,
          datasets: [
            {
              label: 'Dataset 1',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.red,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.red, 0.5)
            },
            {
              label: 'Dataset 2',
              data: Utils.numbers(NUMBER_CFG),
              borderColor: Utils.CHART_COLORS.blue,
              backgroundColor: Utils.transparentize(Utils.CHART_COLORS.blue, 0.5)
            }
          ]
        };

        //config
        const config = {
          type: 'bar',
          data: data,
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: 'top'
              },
              title: {
                display: true,
                text: 'Chart.js Bar Chart'
              }
            }
          }
        };

        //init
        const ctx = document.getElementById('VerticalBarChart');
        const VerticalBarChart = new Chart(ctx, config);
        chartAry.push(VerticalBarChart);
      }
      VerticalBarChartInit();

      //action
      const actions = {
        BorderRadius: function (chart) {
          chart.data.datasets.forEach((dataset) => {
            dataset.data = Utils.numbers({ count: chart.data.labels.length, min: -100, max: 100 });
          });
          chart.update();
        },
        FloatingBar: function (chart) {
          chart.data.datasets.forEach((dataset) => {
            dataset.data = chart.data.labels.map(() => {
              return [Utils.rand(-100, 100), Utils.rand(-100, 100)];
            });
          });
          chart.update();
        },
        HorizontalBar: {
          randomize: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.data = Utils.numbers({ count: chart.data.labels.length, min: -100, max: 100 });
            });
            chart.update();
          },
          addDataset: function (chart) {
            const data = chart.data;
            const dsColor = Utils.namedColor(chart.data.datasets.length);
            const newDataset = {
              label: 'Dataset ' + (data.datasets.length + 1),
              backgroundColor: Utils.transparentize(dsColor, 0.5),
              borderColor: dsColor,
              borderWidth: 1,
              data: Utils.numbers({ count: data.labels.length, min: -100, max: 100 })
            };
            chart.data.datasets.push(newDataset);
            chart.update();
          },
          addData: function (chart) {
            const data = chart.data;
            if (data.datasets.length > 0) {
              data.labels = Utils.months({ count: data.labels.length + 1 });

              for (let index = 0; index < data.datasets.length; ++index) {
                data.datasets[index].data.push(Utils.rand(-100, 100));
              }

              chart.update();
            }
          },
          removeDataset: function (chart) {
            chart.data.datasets.pop();
            chart.update();
          },
          removeData: function (chart) {
            chart.data.labels.splice(-1, 1); // remove the label first

            chart.data.datasets.forEach((dataset) => {
              dataset.data.pop();
            });

            chart.update();
          }
        },
        StackedBar: function (chart) {
          chart.data.datasets.forEach((dataset) => {
            dataset.data = Utils.numbers({ count: chart.data.labels.length, min: -100, max: 100 });
          });
          chart.update();
        },
        StackedBarGroups: function (chart) {
          chart.data.datasets.forEach((dataset) => {
            dataset.data = Utils.numbers({ count: chart.data.labels.length, min: -100, max: 100 });
          });
          chart.update();
        },
        VerticalBar: {
          randomize: function (chart) {
            chart.data.datasets.forEach((dataset) => {
              dataset.data = Utils.numbers({ count: chart.data.labels.length, min: -100, max: 100 });
            });
            chart.update();
          },
          addDataset: function (chart) {
            const data = chart.data;
            const dsColor = Utils.namedColor(chart.data.datasets.length);
            const newDataset = {
              label: 'Dataset ' + (data.datasets.length + 1),
              backgroundColor: Utils.transparentize(dsColor, 0.5),
              borderColor: dsColor,
              borderWidth: 1,
              data: Utils.numbers({ count: data.labels.length, min: -100, max: 100 })
            };
            chart.data.datasets.push(newDataset);
            chart.update();
          },
          addData: function (chart) {
            const data = chart.data;
            if (data.datasets.length > 0) {
              data.labels = Utils.months({ count: data.labels.length + 1 });

              for (let index = 0; index < data.datasets.length; ++index) {
                data.datasets[index].data.push(Utils.rand(-100, 100));
              }

              chart.update();
            }
          },
          removeDataset: function (chart) {
            chart.data.datasets.pop();
            chart.update();
          },
          removeData: function (chart) {
            chart.data.labels.splice(-1, 1); // remove the label first

            chart.data.datasets.forEach((dataset) => {
              dataset.data.pop();
            });

            chart.update();
          }
        }
      };

      //resize
      if (chartAry.length) {
        window.addEventListener('resize', function () {
          // myChart.resize();
          chartAry.forEach(function (chart) {
            chart.resize();
          });
        });
      }
    </script>
  </body>
</html>
